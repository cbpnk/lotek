@require(TITLE, HTML, WOPISrc, access_token, hypothesis_url)
<!doctype html>
<html>
<head>
<base target="_parent">
<title>@TITLE!e</title>
<link href="@WOPISrc!a" rel="canonical" />

<style type='text/css'>
html, body {
  margin: 0;
  padding: 0;
  width: 100%;
  height: 100%;
  box-sizing: border-box;
}

body {
  padding: 1em 0;
}

main {
  margin: 0;
  padding: 0;
}

.callout .admonition-title {
  float: left;
  font-size: 2em;
  margin: 0;
  padding: 0.2em;
}

@(
from pygments.formatters import HtmlFormatter
formatter = HtmlFormatter(linenos=True)
)
@formatter.get_style_defs('.codehilite')
</style>
<script type="application/json" class="js-hypothesis-config">
{"assetRoot": "@{hypothesis_url}static/vendor/npm/hypothesis@@1.954.0/",
 "sidebarAppUrl": "@{hypothesis_url}static/app.html"
}
</script>

<script>
var hypothesisConfig = function() {
    return {
        services: [{
            apiUrl: "@{hypothesis_url}hypothesis/api/",
            grantToken: @access_token!json!e,
            sentry: {"enabled": false},
            assetRoot: "@{hypothesis_url}static/vendor/npm/hypothesis@@1.954.0/",
        }],
    };
};

var MathJax = {
  tex: {
    inlineMath: [ ["\\(","\\)"] ],
    displayMath: [ ["\\[","\\]"] ],
    processEscapes: true,
    processEnvironments: true
  },
  options: {
    ignoreHtmlClass: ".*|",
    processHtmlClass: "arithmatex"
  }
};
</script>

<script src="/static/vendor/npm/mathjax@@3/es5/tex-chtml.js"></script>

<script src="@{hypothesis_url}static/vendor/npm/hypothesis@@1.954.0/build/boot.js"></script>
</head>
<body>
<main>
@HTML
</main>
</body>
</html>
